<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certified Quality Auditor Registration - Best Rated Hospitals</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <div class="nav-brand">
                <img src="assets/img/logo.png" alt="Best Rated Hospitals" class="nav-logo" style="height: 40px; margin-right: 12px; vertical-align: middle;">
                <span>Best Rated Hospitals</span>
            </div>
            <button class="nav-toggle" onclick="toggleMobileNav()">
                <span class="icon">menu</span>
            </button>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="search.html">Search</a></li>
                <li><a href="login.html">Login</a></li>
                <li><a href="register.html">Register</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content" style="min-height: 100vh; display: flex; align-items: center; padding: 40px 0; background: linear-gradient(135deg, rgba(248, 250, 252, 0.95) 0%, rgba(241, 245, 249, 0.9) 100%), url('assets/img/bg.jpg'); background-size: cover; background-position: center; background-attachment: fixed;">
        <div class="container">
            <div class="layout" style="justify-content: center;">
                <div class="flex sm8 md8">
                    <div class="card" style="box-shadow: 0 12px 40px rgba(0,0,0,0.1); border-radius: 20px; overflow: hidden; border: 1px solid var(--gray-200); background: var(--white);">
                        <div class="card-header" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; text-align: center; padding: 40px 32px;">
                            <div class="logo-container" style="margin-bottom: 20px;">
                                <div class="logo-circle" style="width: 100px; height: 100px; background: rgba(255,255,255,0.15); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; backdrop-filter: blur(10px); padding: 20px; box-sizing: border-box;">
                                    <img src="assets/img/logo.png" alt="Best Rated Hospitals" style="width: 60px; height: 60px; filter: brightness(0) invert(1);">
                                </div>
                            </div>
                            <h2 style="margin-bottom: 8px; font-size: 1.75rem; font-weight: 600;">Certified Quality Auditor Registration</h2>
                            <p style="margin: 0; opacity: 0.9; font-size: 1rem;">Join our network of healthcare quality assessment professionals</p>
                        </div>
                        <div class="card-text" style="padding: 40px 32px;">
                            <form id="auditorRegisterForm">
                                <div class="layout" style="gap: 20px; margin-bottom: 20px;">
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="firstName" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">First Name *</label>
                                            <input type="text" id="firstName" name="firstName" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="lastName" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Last Name *</label>
                                            <input type="text" id="lastName" name="lastName" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                </div>

                                <div class="layout" style="gap: 20px; margin-bottom: 20px;">
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="email" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Email Address *</label>
                                            <input type="email" id="email" name="email" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="phone" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Phone Number *</label>
                                            <input type="tel" id="phone" name="phone" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                </div>

                                <div class="layout" style="gap: 20px; margin-bottom: 20px;">
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="licenseNumber" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Professional License Number *</label>
                                            <input type="text" id="licenseNumber" name="licenseNumber" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="certification" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Quality Certification *</label>
                                            <select id="certification" name="certification" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                                <option value="">Select Certification</option>
                                                <option value="CQA">Certified Quality Auditor (CQA)</option>
                                                <option value="CQE">Certified Quality Engineer (CQE)</option>
                                                <option value="CQM">Certified Quality Manager (CQM)</option>
                                                <option value="CPHQ">Certified Professional in Healthcare Quality (CPHQ)</option>
                                                <option value="JCI">Joint Commission International Surveyor</option>
                                                <option value="ISO">ISO 9001 Lead Auditor</option>
                                                <option value="Other">Other Healthcare Quality Certification</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="layout" style="gap: 20px; margin-bottom: 20px;">
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="experience" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Years of Experience *</label>
                                            <select id="experience" name="experience" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                                <option value="">Select Experience</option>
                                                <option value="1-2">1-2 years</option>
                                                <option value="3-5">3-5 years</option>
                                                <option value="6-10">6-10 years</option>
                                                <option value="11-15">11-15 years</option>
                                                <option value="16+">16+ years</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="specialization" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Specialization Area *</label>
                                            <select id="specialization" name="specialization" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                                <option value="">Select Specialization</option>
                                                <option value="patient-safety">Patient Safety</option>
                                                <option value="quality-management">Quality Management</option>
                                                <option value="infection-control">Infection Control</option>
                                                <option value="clinical-governance">Clinical Governance</option>
                                                <option value="risk-management">Risk Management</option>
                                                <option value="accreditation">Healthcare Accreditation</option>
                                                <option value="performance-improvement">Performance Improvement</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group" style="margin-bottom: 20px;">
                                    <label for="organization" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Current Organization</label>
                                    <input type="text" id="organization" name="organization" style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                </div>

                                <div class="form-group" style="margin-bottom: 20px;">
                                    <label for="bio" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Professional Bio</label>
                                    <textarea id="bio" name="bio" rows="4" style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease; resize: vertical;" placeholder="Brief description of your professional background and expertise..."></textarea>
                                </div>

                                <div class="layout" style="gap: 20px; margin-bottom: 20px;">
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="password" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Password *</label>
                                            <input type="password" id="password" name="password" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                    <div class="flex xs12 md6">
                                        <div class="form-group" style="margin-bottom: 20px;">
                                            <label for="confirmPassword" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-primary);">Confirm Password *</label>
                                            <input type="password" id="confirmPassword" name="confirmPassword" required style="width: 100%; padding: 12px 16px; border: 2px solid var(--gray-300); border-radius: 8px; font-size: 1rem; transition: border-color 0.3s ease;">
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group" style="margin-bottom: 30px;">
                                    <label style="display: flex; align-items: center; cursor: pointer;">
                                        <input type="checkbox" id="terms" name="terms" required style="margin-right: 12px; transform: scale(1.2);">
                                        <span style="font-size: 0.95rem; color: var(--text-secondary);">I agree to the <a href="#" style="color: var(--primary-color); text-decoration: none;">Terms of Service</a> and <a href="#" style="color: var(--primary-color); text-decoration: none;">Privacy Policy</a>, and confirm that all provided information is accurate and verifiable.</span>
                                    </label>
                                </div>

                                <button type="submit" class="btn btn-primary btn-large" style="width: 100%; padding: 16px; font-size: 1.1rem; font-weight: 600; border-radius: 8px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border: none; color: white; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease;">
                                    <span class="icon" style="margin-right: 8px;">verified_user</span>
                                    Register as Quality Auditor
                                </button>

                                <div style="text-align: center; margin-top: 24px;">
                                    <p style="color: var(--text-secondary); margin: 0;">Already have an account? <a href="login.html" style="color: var(--primary-color); text-decoration: none; font-weight: 500;">Sign in here</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Best Rated Hospitals. All rights reserved.</p>
            <p>Helping you find the best healthcare around you.</p>
        </div>
    </footer>

    <script>
        const API_BASE_URL = 'https://healthier-a4a89cbfae6a.herokuapp.com/api';

        // Mobile navigation toggle
        function toggleMobileNav() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Form validation and submission
        document.getElementById('auditorRegisterForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Validate passwords match
            if (data.password !== data.confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            // Validate password strength
            if (data.password.length < 8) {
                alert('Password must be at least 8 characters long!');
                return;
            }
            
            try {
                const response = await fetch(`${API_BASE_URL}/assessor/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        firstName: data.firstName,
                        lastName: data.lastName,
                        email: data.email,
                        phone: data.phone,
                        licenseNumber: data.licenseNumber,
                        certification: data.certification,
                        experience: data.experience,
                        specialization: data.specialization,
                        organization: data.organization,
                        bio: data.bio,
                        password: data.password,
                        role: 'assessor'
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    alert('Registration successful! Please check your email for verification instructions.');
                    window.location.href = 'assessor-dashboard.html';
                } else {
                    const error = await response.json();
                    alert('Registration failed: ' + (error.message || 'Please try again'));
                }
            } catch (error) {
                console.error('Registration error:', error);
                alert('Registration failed. Please check your connection and try again.');
            }
        });

        // Form field validation
        document.querySelectorAll('input, select, textarea').forEach(field => {
            field.addEventListener('blur', function() {
                if (this.hasAttribute('required') && !this.value.trim()) {
                    this.style.borderColor = 'var(--error-color)';
                } else {
                    this.style.borderColor = 'var(--success-color)';
                }
            });
            
            field.addEventListener('focus', function() {
                this.style.borderColor = 'var(--primary-color)';
            });
        });

        // Email validation
        document.getElementById('email').addEventListener('blur', function() {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (this.value && !emailRegex.test(this.value)) {
                this.style.borderColor = 'var(--error-color)';
                alert('Please enter a valid email address');
            }
        });
    </script>
</body>
</html>
